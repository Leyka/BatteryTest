{% extends "layout.html" %}

{% block title %}All Batteries{% endblock %}

{% block content %}
  {% if batteries %}
    <div class="vertial-space">
      {# <div>
        <a href="#">Copy capacity to clipboard</a>
      </div> #}
    </div>
    <input type="text" placeholder="Filter by battery ID" id="filterById" class="vertial-space"/>
    <table id="tblBatteries" class="table-sortable">
      <thead>
        <tr>
          <th width="40" class="no-sort"><span id="select-all">✘</span></th>
          <th>Battery ID</th>
          <th width="100" title="Last known capacity (mah)">Capacity</th>
          <th width="100" title="Last known resistance (mΩ)">Resistance</th>
          <th>Model</th>
          <th>Color</th>
          <th>Used by</th>
          <th width="70"></th>
        </tr>
      </thead>
      <tbody>
        {% for battery in batteries %}
        <tr class="{{'warning' if not (battery.spec or battery.color) else ''}}">
          <td><input type="checkbox" checked class="chkBattery"></td>
          <td>
            <a href="/batteries/{{battery.public_id}}">
              {{ battery.public_id}}
            </a>
          </td>
          <td>{{ battery.tests | map(attribute='capacity_mah') | list | last }}</td>
          <td>{{ battery.tests | map(attribute='resistance_mohm') | list | last }}</td>
          <td>{{ battery.spec or 'N/A' }}</td>
          <td>{{ battery.color or 'N/A' }}</td>
          <td>{{ battery.used_by or 'N/A' }}</td>
          <td><a href="#">Delete</a></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}
{% endblock %}
